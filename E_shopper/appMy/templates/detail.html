{% extends 'base.html' %}
{% load static %}



{% block css %}
    <!-- Slick -->
    <link rel="stylesheet" type="text/css" href="{% static 'css/slick.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/slick-theme.css' %}">
    <style>
        .colorradio + label{
            border: 4px solid black !important;
        }
        .sizeradio,.colorradio{
            -webkit-appearance: none;
            -moz-appearance: none;
            -ms-appearance: none;
            -o-appearance: none;
            appearance: none;
        }
        .sizeradio:checked + label{
            background: yellow !important;
            box-shadow: inset 0px 0px 8px 4px #00000060;
        }
        .colorradio:checked + label{
            box-shadow: inset 0px 0px 8px 15px #00000060;
            border: 4px solid gray !important;
        }
        
        .card {
            position: relative;
            display: flex;
            flex-direction: column;
            min-width: 0;
            padding: 20px;
            width: 100%;
            word-wrap: break-word;
            background-color: #fff;
            background-clip: border-box;
            border-radius: 6px;
            -moz-box-shadow: 0px 0px 5px 0px rgba(212, 182, 212, 1)
        }

        .comment-box{
            
            padding:5px;
        }



        .comment-area textarea{
        resize: none; 
        }


        .form-control:focus {
            color: #495057;
            background-color: #fff;
            border-color: #ffffff;
            outline: 0;
            box-shadow: 0 0 0 1px rgb(255, 136, 0) !important;
        }

        .send {
            color: #fff;
            background-color: #ff9d00;
            border-color: #ff9d00;
        }

        .send:hover {
            color: #fff;
            background-color: #ff9d00;
            border-color: #ff9d00;
        }


        .rating {
        display: flex;
                margin-top: -10px;
            flex-direction: row-reverse;
            margin-left: -4px;
                float: left;
        }

        .rating>input {
            display: none
        }

        .star,.star-full{
            position: relative;
            width: 25px;
            font-size: 30px !important;
            color: #ff9d00;
            cursor: pointer;
        }
        .star-full::before {
            content: "\2605";
            position: absolute;
            opacity: 1
        }
        
        .rating>label {
            position: relative;
            width: 30px;
            font-size: 35px !important;
            color: #ff9d00;
            cursor: pointer;
        }

        .rating>label::before {
            content: "\2605";
            position: absolute;
            opacity: 0
        }

        .rating>label:hover:before,
        .rating>label:hover~label:before {
            opacity: 1 !important
        }

        .rating>input:checked~label:before {
            opacity: 1
        }

        .rating:hover>input:checked~label:before {
            opacity: 0.4
        }
    </style>
{% endblock css %}
    


{% block body %}


<div class="container p-5 pb-0 pt-0">
        <!-- Open Content -->
        <section class="p-5 pb-0 pt-0">
            <div class="container pb-5">
                <div class="row">
                    <div class="col-lg-5 mt-5">
                        <div class="card mb-3"> 
                            <img class="card-img img-fluid" src="{{ product.product.image.url }}" alt="Card image cap" id="product-detail" style="height: 400px; object-fit: contain;">
                        </div>
                        <div class="row">
                            <!--Start Controls-->
                            <div class="col-1 align-self-center">
                                <a href="#multi-item-example" role="button" data-bs-slide="prev">
                                    <i class="text-dark fas fa-chevron-left"></i>
                                    <span class="sr-only">Previous</span>
                                </a>
                            </div>
                            <!--End Controls-->
                            <!--Start Carousel Wrapper-->
                            <div id="multi-item-example" class="col-10 carousel slide carousel-multi-item" data-bs-ride="carousel">
                                <!--Start Slides-->
                                <div class="carousel-inner product-links-wap" role="listbox">
    
                                    <!--First slide-->
                                    <div class="carousel-item active">
                                        <div class="row">
                                            
                                            {% for i in product.images.all|slice:':3' %}
                                                
                                            <div class="col-4">
                                                <a href="#">
                                                    <img class="card-img img-fluid" src="{{ i.image.url }}" style="object-fit: cover; height: 100px;" alt="Product Image 1">
                                                </a>
                                            </div>
                                            {% endfor %}
                                                
                                            
                                        </div>
                                    </div>
                                    <!--/.First slide-->
                                    
                                    {% if product.images.all|length > 3 %}
                                        <!--Second slide-->
                                        <div class="carousel-item">
                                            <div class="row">
                                                {% for i in product.images.all|slice:'3:6' %}
                                                <div class="col-4">
                                                    <a href="#">
                                                        <img class="card-img img-fluid" src="{{ i.image.url }}" style="object-fit: cover; height: 100px;"
                                                            alt="Product Image 1">
                                                    </a>
                                                </div>
                                                {% endfor %}
                                            </div>
                                        </div>
                                        <!--/.Second slide-->
                                    {% endif %}
                                        
                                    
                                    {% if product.images.all|length > 6 %}
                                    <!--Third slide-->
                                    <div class="carousel-item">
                                        <div class="row">
                                            {% for i in product.images.all|slice:'6:9' %}
                                            <div class="col-4">
                                                <a href="#">
                                                    <img class="card-img img-fluid" src="{{ i.image.url }}" style="object-fit: cover; height: 100px;"
                                                        alt="Product Image 1">
                                                </a>
                                            </div>
                                            {% endfor %}
                                        </div>
                                    </div>
                                    <!--/.Third slide-->
                                    {% endif %}
                                </div>
                                <!--End Slides-->
                            </div>
                            <!--End Carousel Wrapper-->
                            <!--Start Controls-->
                            <div class="col-1 align-self-center">
                                <a href="#multi-item-example" role="button" data-bs-slide="next">
                                    <i class="text-dark fas fa-chevron-right"></i>
                                    <span class="sr-only">Next</span>
                                </a>
                            </div>
                            <!--End Controls-->
                        </div>
                    </div>
                    <!-- col end -->
                    <div class="col-lg-7 mt-5">
                        <div class="card">
                            <div class="card-body">
                                <h1 class="h2">{{ product.product.title }}</h1>
                                <p class="h3 py-2 text-success fw-bold" id="productprice">₺{{ product.sizeletter.first.price }}</p>
                                <p class="py-2">
                                    <i class="fa fa-star text-warning"></i>
                                    <i class="fa fa-star text-warning"></i>
                                    <i class="fa fa-star text-warning"></i>
                                    <i class="fa fa-star text-warning"></i>
                                    <i class="fa fa-star text-secondary"></i>
                                    <span class="list-inline-item text-dark">Rating {{ product.product.stars }} | {{ comments|length }} Comments</span>
                                </p>
                                <ul class="list-inline">
                                    <li class="list-inline-item">
                                        <h6>Marka:</h6>
                                    </li>
                                    <li class="list-inline-item">
                                        <p class="text-muted"><strong>{{ product.product.brand }}</strong></p>
                                    </li>
                                </ul>
                                <h6>Ürün Hakkında:</h6>
                                <ul class="list-unstyled pb-3">
                                    <li>{{ product.product.detail|truncatechars:150 }}</li>
                                </ul>
    
                                <h6>Açıklama:</h6>
                                <p>{{ product.product.text|truncatechars:150 }}</p>
    
                                <form name="formdetay" method="POST" id="formdetay">
                                    {% csrf_token %}
                                    <input type="hidden" name="product-title" value="Activewear">
                                    <div class="row">
                                        
                                        {% if product.product.category.slug == 'kiyafet' %}
                                            <div class="col-auto">
                                            <ul class="list-inline">
                                                
                                                {% if messages %}
                                                    <ul>
                                                        {% for i in messages %}
                                                            <div class="text-danger">{{ i }}</div>
                                                        {% endfor %}   
                                                    </ul>
                                                {% endif %}
                                                    
                                                <li class="list-inline-item">Size :</li>
                                                
                                                <li class="list-inline-item">
                                                    <input type="radio" name="size" value="S" required id="sizeS" class="sizeradio">
                                                    <label for="sizeS" class="btn btn-success">S</label>
                                                </li>
                                                <li class="list-inline-item">
                                                    <input type="radio" name="size" value="M" required id="sizeM" class="sizeradio">
                                                    <label for="sizeM" class="btn btn-success">M</label>
                                                </li>
                                                <li class="list-inline-item">
                                                    <input type="radio" name="size" value="L" required id="sizeL" class="sizeradio">
                                                    <label for="sizeL" class="btn btn-success">L</label>
                                                </li>
                                                <li class="list-inline-item">
                                                    <input type="radio" name="size" value="XL" required id="sizeXL" class="sizeradio">
                                                    <label for="sizeXL" class="btn btn-success">XL</label>
                                                </li>
                                                <li class="list-inline-item">
                                                    <input type="radio" name="size" value="XXL" required id="sizeXXL" class="sizeradio">
                                                    <label for="sizeXXL" class="btn btn-success">XXL</label>
                                                </li>
                                                
                                                
                                            </ul>
                                        </div>
                                        {% endif %}
                                            
                                        {% if product.product.category.slug == 'ayakkabi' %}
        
                                        <ul class="list-inline">
                                                
                                            {% if messages %}
                                                <ul>
                                                    {% for i in messages %}
                                                        <div class="text-danger">{{ i }}</div>
                                                    {% endfor %}   
                                                </ul>
                                            {% endif %}
                                                
                                            <li class="list-inline-item">Size :</li>
                                            
                                            <li class="list-inline-item">
                                                <input type="radio" name="size" value="36" required id="size36" class="sizeradio">
                                                <label for="size36" class="btn btn-success">36</label>
                                            </li>
                                            <li class="list-inline-item">
                                                <input type="radio" name="size" value="37" required id="size37" class="sizeradio">
                                                <label for="size37" class="btn btn-success">37</label>
                                            </li>
                                            <li class="list-inline-item">
                                                <input type="radio" name="size" value="38" required id="size38" class="sizeradio">
                                                <label for="size38" class="btn btn-success">38</label>
                                            </li>
                                            <li class="list-inline-item">
                                                <input type="radio" name="size" value="39" required id="size39" class="sizeradio">
                                                <label for="size39" class="btn btn-success">39</label>
                                            </li>
                                            <li class="list-inline-item">
                                                <input type="radio" name="size" value="40" required id="size40" class="sizeradio">
                                                <label for="size40" class="btn btn-success">40</label>
                                            </li>
                                            <li class="list-inline-item">
                                                <input type="radio" name="size" value="41" required id="size41" class="sizeradio">
                                                <label for="size41" class="btn btn-success">41</label>
                                            </li>
                                            <li class="list-inline-item">
                                                <input type="radio" name="size" value="42" required id="size42" class="sizeradio">
                                                <label for="size42" class="btn btn-success">42</label>
                                            </li>
                                            <li class="list-inline-item">
                                                <input type="radio" name="size" value="43" required id="size43" class="sizeradio">
                                                <label for="size43" class="btn btn-success">43</label>
                                            </li>
                                            
                                            
                                        </ul>
                                            
                                        {% endif %}
                                                

                                        <div class="col-12">
                                            <ul class="list-inline ">
                                                <li class="list-inline-item text-right">
                                                    Adet
                                                    <input type="hidden" name="count" id="product-quanity" value="1">
                                                </li>
                                                <li class="list-inline-item"><span class="btn btn-success" id="btn-minus">-</span></li>
                                                <li class="list-inline-item"><span class="badge bg-secondary" id="var-value">1</span></li>
                                                <li class="list-inline-item"><span class="btn btn-success" id="btn-plus">+</span></li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    {% if request.user.is_authenticated %}
                                    <div class="row">
                                        <div class="col">
                                            <button type="submit" class="btn btn-success btn-lg" name="submit" value="sepet">Sepete Ekle</button>
                                        </div>
                                        
                                    </div>
                                    {% else %}
                                    <div class="row pb-3">
                                        <div class="col d-grid">
                                            <a class="nav-link text-primary" href="{% url 'loginUser' %}">Ürünü sepete eklemek için lütfen giriş yapın!</a>
                                        </div>
                                    </div>
                                    {% endif %}
                                        
                                </form>
                              
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Close Content -->
</div>

    <!-- ürünler -->
    <div class="container">
        <div class="ozel-urun ">
          <div class="row">
            
            
            <div class="container">
                <div class="row mb-3">
                    <h4>Yorumlar</h4>
                    <!-- Yorum -->
                    <div class="col-12">
                        <div class="card p-4">
                            
                            {% for comm in comments %}
                            <hr>
                                <div class="row">                           
                                <div class="col-2  text-center">                              
                                    <img src="https://i.imgur.com/xELPaag.jpg" width="70%" class="rounded-circle mt-2">
                                    <h5 class="mt-3">{{ comm.user.get_full_name }}</h5>
                                    
                                </div>
                                <div class="col-10">
                                    <div class="comment-box ml-2 m-0">                     
                                        <div class="d-flex justify-content-between p-0">
                                          <div class="rating m-0"> 
                                                                                    
                                            {% for i in '54321'|make_list %}
                                                {% if i|add:'0' > comm.star %}
                                                <p class="star m-0">☆</p>
                                                {% else %}
                                                <p class="star-full m-0">☆</p> 
                                                {% endif %}
                                            {% endfor %}
                                                
                                        </div>
                                        <h6 class="mt-4">{{ comm.date_now }}</h6>
                                        </div>
                                        
                                        <hr>
                                        <div class="comment-area"> 
                                            <p style="margin-bottom: 0 !important;" class="text-start">{{ comm.title }}</p>                                     
                                            <p style="margin-bottom: 0 !important;" class="text-start">{{ comm.text }}</p>
                                        </div>                                                                    
                                    </div>
                                </div>
                            </div> 
                            {% endfor %}
                                
                           
                        </div>
                    </div>
                    <h4>Yorum Yap</h4> 
                    <!-- Yorum Yap -->
                    <div class="col-12">
                        <div class="card p-4">
                            <div class="row">                           
                                <div class="col-2  text-center">                              
                                    <img src="https://i.imgur.com/xELPaag.jpg" width="70%" class="rounded-circle mt-2">
                                    <h5 class="mt-3">{{ request.user.get_full_name }}</h5>
                                </div>
                                <div class="col-10">
                                    <form method="POST" class="comment-box ml-2">                     
                                        {% csrf_token %}
                                        <div class="rating"> 
                                            <input type="radio" name="star" value="5" id="5"><label for="5">☆</label>
                                            <input type="radio" name="star" value="4" id="4"><label for="4">☆</label> 
                                            <input type="radio" name="star" value="3" id="3"><label for="3">☆</label>
                                            <input type="radio" name="star" value="2" id="2"><label for="2">☆</label>
                                            <input type="radio" name="star" value="1" id="1"><label for="1">☆</label>
                                        </div>
                                        <div class="comment-area"> 
                                            <input type="text" name="title" class="form-control" placeholder="Yorum Başlığı">                                      
                                            <textarea class="form-control" name="text" placeholder="Yorum..." rows="4"></textarea>                                    
                                        </div>                                    
                                        <div class="comment-btns mt-2">                                        
                                            <div class="row">                                           
                                                <div class="col-6">                                                
                                                    <div class="pull-left">   
                                                    
                                                    {% if request.user.is_authenticated %}
                                                    <button type="submit" name="submit" value="comment" class="btn btn-success btn-sm py-2 px-5">Yorumu Paylaş</button>                                                           
                                                    {% else %}
                                                    <a href="{% url 'loginUser' %}">Yorum Yapmak İçin Giriş Yapın</a> 
                                                    {% endif %}
                                                                                                     
                                                    </div>                 
                                                </div>                                                                                
                                            </div>                                   
                                        </div>                               
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    
            
            
          </div>
        </div>
      </div>
    
   

    
    {% endblock body %}
    
    {% block js %}

    <!-- Start Slider Script -->
    <script src="{% static 'js/slick.min.js' %}"></script>
    <script>
        function change_image(image){
            var container = document.getElementById("main-image");
        container.src = image.src;
        }
        // Product detail
        $('.product-links-wap a').click(function(){
            var this_src = $(this).children('img').attr('src');
            $('#product-detail').attr('src',this_src);
            return false;
          });
          $('#btn-minus').click(function(){
            var val = $("#var-value").html();
            val = (val=='1')?val:val-1;
            $("#var-value").html(val);
            $("#product-quanity").val(val);
            return false;
          });
          $('#btn-plus').click(function(){
            var val = $("#var-value").html();
            val++;
            $("#var-value").html(val);
            $("#product-quanity").val(val);
            return false;
          });
          $('.btn-size').click(function(){
            var this_val = $(this).html();
            $("#product-size").val(this_val);
            $(".btn-size").removeClass('btn-secondary');
            $(".btn-size").addClass('btn-success');
            $(this).removeClass('btn-success');
            $(this).addClass('btn-secondary');
            return false;
          });
        $('#carousel-related-product').slick({
            infinite: true,
            arrows: false,
            slidesToShow: 4,
            slidesToScroll: 3,
            dots: true,
            responsive: [{
                    breakpoint: 1024,
                    settings: {
                        slidesToShow: 3,
                        slidesToScroll: 3
                    }
                },
                {
                    breakpoint: 600,
                    settings: {
                        slidesToShow: 2,
                        slidesToScroll: 3
                    }
                },
                {
                    breakpoint: 480,
                    settings: {
                        slidesToShow: 2,
                        slidesToScroll: 3
                    }
                }
            ]
        });
        
     
    </script>
    <!-- End Slider Script -->
    {% endblock js %}